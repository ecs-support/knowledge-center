<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Collection | ECS Knowledge Center</title>
    <link>/tag/collection/</link>
      <atom:link href="/tag/collection/index.xml" rel="self" type="application/rss+xml" />
    <description>Collection</description>
    <generator>Source Themes Academic (https://sourcethemes.com/academic/)</generator><language>en-us</language><copyright>ECS@Support©2020</copyright><lastBuildDate>Sun, 10 May 2020 00:00:00 +0000</lastBuildDate>
    <image>
      <url>/images/icon_hu43744f45c14c266b8ced15c1aa1fe7c4_2428_512x512_fill_lanczos_center_2.png</url>
      <title>Collection</title>
      <link>/tag/collection/</link>
    </image>
    
    <item>
      <title>Collections.Counter</title>
      <link>/post/collections/</link>
      <pubDate>Sun, 10 May 2020 00:00:00 +0000</pubDate>
      <guid>/post/collections/</guid>
      <description>&lt;p&gt;มอดูล collections ของไพธอนประกอบไปด้วยออบเจ็กต์จิปาถะที่อาจสะดวกที่จะใช้ในงานบางอย่าง เช่น collections.OrderedDict ที่ได้เขียนไปใน &lt;a href=&#34;https://phyblas.hinaboshi.com/20190706&#34;&gt;https://phyblas.hinaboshi.com/20190706&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;ในบทความนี้จะแนะนำออบเจ็กต์อีกตัวที่อาจมีโอกาสได้ใช้บ่อย คือ collections.Counter Counter เป็นออบเจ็กต์ที่ใช้งานสะดวก ในเวลาที่เราต้องการจะนับจำนวนของอะไรบางอย่างว่ามีอะไรอยู่เท่าไหร่ เช่น มีลิสต์ที่มีตัวเลขอยู่จำนวนหนึ่ง ต้องการจะนับดูว่ามีตัวเลขอะไรอยู่เท่าไหร่ ถ้าใช้ดิกชันนารีทั่วไป อาจเขียนได้แบบนี้&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-python&#34;&gt;lislek = [12,10,11,12,14,11,11,13,11,10,13,12]
naplek = {}
for lek in lislek:
    if(lek in naplek):
        naplek[lek] += 1
    else:
        naplek[lek] = 1

print(naplek) # ได้ {12: 3, 10: 2, 11: 4, 14: 1, 13: 2}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;แต่ถ้าใช้ Counter ก็จะทำได้โดยง่าย โดยแค่ใส่ลิสต์นั้นลงไปก็จะทำการนับให้เลย&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-python&#34;&gt;from collections import Counter

lislek = [22,20,21,22,24,21,21,23,21,20,23,22]
naplek = Counter(lislek)
print(naplek) # ได้ Counter({21: 4, 22: 3, 20: 2, 23: 2, 24: 1})
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ผลที่ได้จะได้เป็นออบเจ็กต์ Counter ที่เรียงลำดับตามจำนวนจากมากไปน้อยให้เลย&lt;/p&gt;

&lt;p&gt;ออบเจ็กต์ Counter นี้โดยพื้นฐานแล้วมีส่วนคล้ายกับออบเจ็กต์ชนิดดิกชันนารี คือสามารถดูค่าได้โดยใส่คีย์ เพียงแต่ถ้าใส่คีย์ที่ไม่มีจะได้ค่า 0 และมีเมธอด .values() .keys() .items() และสามารถแปลงเป็นดิกชันนารีได้โดยง่าย&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-python&#34;&gt;print(naplek[22]) # ได้ 3
print(naplek[26]) # ได้ 0
print(naplek.keys()) # ได้ dict_keys([22, 20, 21, 24, 23])
print(naplek.values()) # ได้ dict_values([3, 2, 4, 1, 2])
print(naplek.items()) # ได้ dict_items([(22, 3), (20, 2), (21, 4), (24, 1), (23, 2)])
print(dict(naplek)) # ได้ {22: 3, 20: 2, 21: 4, 24: 1, 23: 2}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ตั้งแต่ไพธอน 3.6 เป็นต้นไปดิกชันนารีจะเรียงอย่างมีลำดับ ดังนั้น Counter เมื่อแปลงเป็นดิกชันนารีแล้วลำดับในที่นี้จะเรียงตามลำดับก่อนหลังที่เริ่มเจอตัวแรก เหมือนอย่างในตัวอย่างแรกที่วนไล่ด้วย for สร้างดิกชันนารีขึ้นมาเอง&lt;/p&gt;

&lt;p&gt;Counter นอกจากจะใช้กับลิสต์แล้วก็ยังใช้กับสายอักขระได้ด้วย โดยถ้าป้อนสายอักขระลงไปมันก็จะช่วยนับจำนวนให้ว่ามีอักษรตัวไหนอยู่กี่ตัว&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-python&#34;&gt;napakson = Counter(&#39;จอดรถตรงตรอกยอมทนอดนอนอดกรนรอยลภมรดมดอกหอมบนขอนตรงคลองมอญ&#39;)
print(napakson) # ได้ Counter({&#39;อ&#39;: 12, &#39;ร&#39;: 7, &#39;น&#39;: 6, &#39;ด&#39;: 5, &#39;ม&#39;: 5, &#39;ต&#39;: 3, &#39;ง&#39;: 3, &#39;ก&#39;: 3, &#39;ย&#39;: 2, &#39;ล&#39;: 2, &#39;จ&#39;: 1, &#39;ถ&#39;: 1, &#39;ท&#39;: 1, &#39;ภ&#39;: 1, &#39;ห&#39;: 1, &#39;บ&#39;: 1, &#39;ข&#39;: 1, &#39;ค&#39;: 1, &#39;ญ&#39;: 1})
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Counter ที่สร้างมาแล้วสามารถเพิ่มข้อมูลลงไปได้ เช่นโดยใช้ +=&lt;/p&gt;

&lt;p&gt;เช่นอาจลองสร้าง Counter ว่างเปล่าแล้วค่อยๆใส่สมาชิกเพิ่มเข้าไป โดยไล่นับเพิ่มไปเรื่อยๆเช่น&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-python&#34;&gt;lislek = [2,1,4,5,2,6,2,6,3,2,4,1,2,2,3,2,1,4,2,4]
naplek = Counter()
for lek in lislek:
    naplek[lek] += 1

print(naplek)
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;หรืออาจใช้เมธอด .update() เพื่อทำการเพิ่มข้อมูลใส่เข้าไปเรื่อยๆเช่น&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-python&#34;&gt;napakson = Counter()
napakson.update(&#39;กนกพล&#39;)
print(napakson) # ได้ Counter({&#39;ก&#39;: 2, &#39;น&#39;: 1, &#39;พ&#39;: 1, &#39;ล&#39;: 1})
napakson.update(&#39;คนตลก&#39;)
print(napakson) # ได้ Counter({&#39;ก&#39;: 3, &#39;น&#39;: 2, &#39;ล&#39;: 2, &#39;พ&#39;: 1, &#39;ค&#39;: 1, &#39;ต&#39;: 1})
napakson.update(&#39;ตกคลอง&#39;)
print(napakson) # ได้ Counter({&#39;ก&#39;: 4, &#39;ล&#39;: 3, &#39;น&#39;: 2, &#39;ค&#39;: 2, &#39;ต&#39;: 2, &#39;พ&#39;: 1, &#39;อ&#39;: 1, &#39;ง&#39;: 1})
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;นอกจากนี้ยังสามารถสร้างโดยแทนเลขจำนวนข้อมูลเข้าไป เช่นเดียวกับเวลาสร้างดิกชันนารีก็ได้&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-python&#34;&gt;nap = Counter(a=7,b=2)
print(nap) # ได้ Counter({&#39;a&#39;: 7, &#39;b&#39;: 2})
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;หรือจะสร้างโดยแปลงจากดิกชันนารีก็ได้&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-python&#34;&gt;dic = {11: 2, 13: 4}
nap = Counter(dic)
print(nap) # ได้ Counter({13: 4, 11: 2})
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;กรณีที่สร้างด้วยวิธีนี้ ค่าอาจจะไม่ใช่ตัวเลขก็ได้ ไม่ทำให้เกิดข้อผิดพลาดอะไร แต่ถ้าตัวที่ไม่ใช่ตัวเลขถูกใส่ข้อมูลเพิ่มเช่นใช้เมธอด .update() ในสภาพแบบนั้นก็จะเกิดข้อผิดพลาด&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-python&#34;&gt;nap = Counter({&amp;quot;ก&amp;quot;: &amp;quot;ข&amp;quot;, &amp;quot;ค&amp;quot;: &amp;quot;ง&amp;quot;})
print(nap) # ได้ Counter({&#39;ค&#39;: &#39;ง&#39;, &#39;ก&#39;: &#39;ข&#39;})
nap.update(&amp;quot;ก&amp;quot;) # ได้ TypeError: can only concatenate str (not &amp;quot;int&amp;quot;) to str
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ถ้าใช้เมธอด .most_common() จะได้ลิสต์ของแต่ละคู่โดยเรียงจากมากไปน้อยตามจำนวนลำดับที่กำหนด แต่ถ้าไม่ได้ใส่เลขลำดับจะแสดงทั้งหมด&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-python&#34;&gt;nap = Counter(&#39;สมพรสวดวนจนอรชรสองคนฉงนฉงวยงวยงงคอตกยอมนอนลงบนบก&#39;)
print(nap.most_common(3)) # ได้ [(&#39;น&#39;, 7), (&#39;ง&#39;, 7), (&#39;อ&#39;, 5)]
print(nap.most_common()) # ได้ [(&#39;น&#39;, 7), (&#39;ง&#39;, 7), (&#39;อ&#39;, 5), (&#39;ว&#39;, 4), (&#39;ส&#39;, 3), (&#39;ร&#39;, 3), (&#39;ย&#39;, 3), (&#39;ม&#39;, 2), (&#39;ค&#39;, 2), (&#39;ฉ&#39;, 2), (&#39;ก&#39;, 2), (&#39;บ&#39;, 2), (&#39;พ&#39;, 1), (&#39;ด&#39;, 1), (&#39;จ&#39;, 1), (&#39;ช&#39;, 1), (&#39;ต&#39;, 1), (&#39;ล&#39;, 1)]
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ถ้าใช้เมธอด .elements() จะได้อิเทอเรเตอร์ที่ไล่สมาชิกที่มีในนั้นทีละตัว&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-python&#34;&gt;nap = Counter(&#39;ดวงกมลชงนมผงรอชมภมรบนดอน&#39;)
print(nap) # ได้ Counter({&#39;ม&#39;: 4, &#39;ง&#39;: 3, &#39;น&#39;: 3, &#39;ด&#39;: 2, &#39;ช&#39;: 2, &#39;ร&#39;: 2, &#39;อ&#39;: 2, &#39;ว&#39;: 1, &#39;ก&#39;: 1, &#39;ล&#39;: 1, &#39;ผ&#39;: 1, &#39;ภ&#39;: 1, &#39;บ&#39;: 1})
el = nap.elements()
print(el) # ได้ &amp;lt;itertools.chain object at 0x10bbfae50&amp;gt;
print(list(el)) # ได้ [&#39;ด&#39;, &#39;ด&#39;, &#39;ว&#39;, &#39;ง&#39;, &#39;ง&#39;, &#39;ง&#39;, &#39;ก&#39;, &#39;ม&#39;, &#39;ม&#39;, &#39;ม&#39;, &#39;ม&#39;, &#39;ล&#39;, &#39;ช&#39;, &#39;ช&#39;, &#39;น&#39;, &#39;น&#39;, &#39;น&#39;, &#39;ผ&#39;, &#39;ร&#39;, &#39;ร&#39;, &#39;อ&#39;, &#39;อ&#39;, &#39;ภ&#39;, &#39;บ&#39;]
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;กรณีที่สร้างโดยกำหนดจำนวนเข้าไปโดยตรงก็จะออกมาเรียงตามลำดับที่ใส่โดยตัวเดียวกันอยู่ติดกัน&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-python&#34;&gt;nap = Counter(na=3,ka=4,ma=2)
print(list(nap.elements())) # ได้ [&#39;na&#39;, &#39;na&#39;, &#39;na&#39;, &#39;ka&#39;, &#39;ka&#39;, &#39;ka&#39;, &#39;ka&#39;, &#39;ma&#39;, &#39;ma&#39;]
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Counter สามารถนำมาบวกลบกันได้ โดยการบวกจะเป็นการเอาสมาชิกที่มีมารวมกัน&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-python&#34;&gt;a = Counter(&#39;ปลวกจกหนอนลงคอ&#39;)
b = Counter(&#39;คงลอยคอลอยวน&#39;)
print(a) # ได้ Counter({&#39;ล&#39;: 2, &#39;ก&#39;: 2, &#39;น&#39;: 2, &#39;อ&#39;: 2, &#39;ป&#39;: 1, &#39;ว&#39;: 1, &#39;จ&#39;: 1, &#39;ห&#39;: 1, &#39;ง&#39;: 1, &#39;ค&#39;: 1})
print(b) # ได้ Counter({&#39;อ&#39;: 3, &#39;ค&#39;: 2, &#39;ล&#39;: 2, &#39;ย&#39;: 2, &#39;ง&#39;: 1, &#39;ว&#39;: 1, &#39;น&#39;: 1})
print(a+b) # ได้ Counter({&#39;อ&#39;: 5, &#39;ล&#39;: 4, &#39;น&#39;: 3, &#39;ค&#39;: 3, &#39;ว&#39;: 2, &#39;ก&#39;: 2, &#39;ง&#39;: 2, &#39;ย&#39;: 2, &#39;ป&#39;: 1, &#39;จ&#39;: 1, &#39;ห&#39;: 1})
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ส่วนการลบจะเอามาหักลบกัน เพียงแต่ถ้าติดลบหรือเป็น 0 จะหายไปเลย ไม่แสดง&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-python&#34;&gt;a = Counter(&#39;พลพรรคครบสองคน&#39;)
b = Counter(&#39;ลงคอรอครอบครอง&#39;)
print(a) # ได้ Counter({&#39;ร&#39;: 3, &#39;ค&#39;: 3, &#39;พ&#39;: 2, &#39;ล&#39;: 1, &#39;บ&#39;: 1, &#39;ส&#39;: 1, &#39;อ&#39;: 1, &#39;ง&#39;: 1, &#39;น&#39;: 1})
print(b) # ได้ Counter({&#39;อ&#39;: 4, &#39;ค&#39;: 3, &#39;ร&#39;: 3, &#39;ง&#39;: 2, &#39;ล&#39;: 1, &#39;บ&#39;: 1})
print(a-b) # ได้ Counter({&#39;พ&#39;: 2, &#39;ส&#39;: 1, &#39;น&#39;: 1})
print(b-a) # ได้ Counter({&#39;อ&#39;: 3, &#39;ง&#39;: 1})
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;นอกจากนี้ยังมีคุณสมบัติแปลกๆเช่นถ้ามีจำนวนทั้งบวกและลบอยู่ในนี้ หากเจอเครื่องหมายบวกจะกำจัดตัวที่เป็นลบ หากเจอเครื่องหมายลบจะเหลือแต่ตัวที่เป็นลบ และค่าจะกลายเป็นบวก&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-python&#34;&gt;nap = Counter(ha=3,na=-2,ya=-4)
print(+nap) # ได้ Counter({&#39;ha&#39;: 3})
print(-nap) # ได้ Counter({&#39;ya&#39;: 4, &#39;na&#39;: 2})
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;สามารถใช้ตัวดำเนินการ &amp;amp; และ | ซึ่งจะให้ผลคล้ายกับการอินเตอร์เซ็กและยูเนียนกันของเซ็ต&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-python&#34;&gt;a = Counter(&#39;สองสมรยอมลงคลองลอยคอ&#39;)
b = Counter(&#39;รอชวนภมรดมดอมดอกขจร&#39;)
print(a) # ได้ Counter({&#39;อ&#39;: 5, &#39;ง&#39;: 3, &#39;ล&#39;: 3, &#39;ส&#39;: 2, &#39;ม&#39;: 2, &#39;ย&#39;: 2, &#39;ค&#39;: 2, &#39;ร&#39;: 1})
print(b) # ได้ Counter({&#39;ร&#39;: 3, &#39;อ&#39;: 3, &#39;ม&#39;: 3, &#39;ด&#39;: 3, &#39;ช&#39;: 1, &#39;ว&#39;: 1, &#39;น&#39;: 1, &#39;ภ&#39;: 1, &#39;ก&#39;: 1, &#39;ข&#39;: 1, &#39;จ&#39;: 1})
print(a|b) # ได้ Counter({&#39;อ&#39;: 5, &#39;ง&#39;: 3, &#39;ม&#39;: 3, &#39;ร&#39;: 3, &#39;ล&#39;: 3, &#39;ด&#39;: 3, &#39;ส&#39;: 2, &#39;ย&#39;: 2, &#39;ค&#39;: 2, &#39;ช&#39;: 1, &#39;ว&#39;: 1, &#39;น&#39;: 1, &#39;ภ&#39;: 1, &#39;ก&#39;: 1, &#39;ข&#39;: 1, &#39;จ&#39;: 1})
print(b&amp;amp;a) # ได้ Counter({&#39;อ&#39;: 3, &#39;ม&#39;: 2, &#39;ร&#39;: 1})
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;เมธอด .subtract() จะให้ผลคล้ายกับการเอามาลบกัน แต่จะเป็นการเปลี่ยนแปลง Counter ตัวทางซ้าย (ตัวที่ใช้เมธอด) แทนที่จะคืนค่า และจำนวนที่เป็น 0 และติดลบจะยังคงเหลืออยู่&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-python&#34;&gt;a = Counter(&#39;ฝนตกตลอด&#39;)
b = Counter(&#39;ตกตรงตรอก&#39;)
print(a) # ได้ Counter({&#39;ต&#39;: 2, &#39;ฝ&#39;: 1, &#39;น&#39;: 1, &#39;ก&#39;: 1, &#39;ล&#39;: 1, &#39;อ&#39;: 1, &#39;ด&#39;: 1})
print(b) # ได้ Counter({&#39;ต&#39;: 3, &#39;ก&#39;: 2, &#39;ร&#39;: 2, &#39;ง&#39;: 1, &#39;อ&#39;: 1})
a.subtract(b)
print(a) # ได้ Counter({&#39;ฝ&#39;: 1, &#39;น&#39;: 1, &#39;ล&#39;: 1, &#39;ด&#39;: 1, &#39;อ&#39;: 0, &#39;ต&#39;: -1, &#39;ก&#39;: -1, &#39;ง&#39;: -1, &#39;ร&#39;: -2})
a.subtract(b)
print(a) # ได้ Counter({&#39;ฝ&#39;: 1, &#39;น&#39;: 1, &#39;ล&#39;: 1, &#39;ด&#39;: 1, &#39;อ&#39;: -1, &#39;ง&#39;: -2, &#39;ก&#39;: -3, &#39;ต&#39;: -4, &#39;ร&#39;: -4})
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;สุดท้ายขอยกตัวอย่างการนำมาประยุกต์ใช้งาน เช่นนับจำนวนเฉพาะที่เป็นองค์ประกอบในตัวเลข&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-python&#34;&gt;def yaek(n):
    nap = Counter()
    i = 2
    while(i*2&amp;lt;=n):
        if(n%i==0):
            nap[i] += 1
            n = n//i
        elif(i==2):
            i += 1
        else:
            i += 2
    if(n!=1):
        nap[n] += 1
    return nap

print(yaek(104)) # ได้ Counter({2: 3, 13: 1})
print(yaek(150)) # ได้ Counter({5: 2, 2: 1, 3: 1})
print(yaek(508)) # ได้ Counter({2: 2, 127: 1})
print(yaek(4500)) # ได้ Counter({5: 3, 2: 2, 3: 2})
print(yaek(16129)) # ได้ Counter({127: 2})
print(yaek(19600)) # ได้ Counter({2: 4, 5: 2, 7: 2})
print(yaek(51000)) # ได้ Counter({2: 3, 5: 3, 3: 1, 17: 1})
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Reference : &lt;a href=&#34;https://phyblas.hinaboshi.com/20200413&#34;&gt;https://phyblas.hinaboshi.com&lt;/a&gt;&lt;/p&gt;
</description>
    </item>
    
  </channel>
</rss>
